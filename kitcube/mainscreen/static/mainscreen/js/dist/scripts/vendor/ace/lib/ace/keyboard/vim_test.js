/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2014, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */

typeof process!="undefined"&&require("amd-loader"),define(["require","exports","module","./../edit_session","./../editor","./../undomanager","./../test/mockrenderer","./../test/assertions","./../lib/keys","./vim"],function(e,t,n){function r(e,t){return(new Array(t+1)).join(e)}function d(){for(var e in f.FUNCTION_KEYS){var t=f.FUNCTION_KEYS[e];h[t]=e}}function v(e){var t=new i(e.split("\n")),n=new o;t.setUndoManager(n),c=new s(new u,t),c.setKeyboardHandler(l.handler)}function m(){for(var e=0;e<arguments.length;e++){var t=arguments[e],n=t.split(/[\-]/),r=n.pop(),i=0;for(var s in n){var o=n[s],u=o.toLowerCase();f.KEY_MODS.hasOwnProperty(u)&&(i|=f.KEY_MODS[u])}i===0&&(r=t);var a;if(h.hasOwnProperty(r))a=h[r],c.onCommandKey({},i,a);else if(i!==0)a=r.toUpperCase().charCodeAt(0),c.onCommandKey({},i,a);else for(var l=0;l<r.length;l++){var p=r.charAt(l);c.onTextInput(p),c.session.$syncInformUndoManager()}}}function g(e){var t=c.session.toString();a.strictEqual(t,e,"Content expected: "+e+", actual: "+t)}function y(e,t){var n=c.getCursorPosition(),r=n.row,i=n.column;a.strictEqual(r,e,"Row expected: "+e+", actual: "+r),a.strictEqual(i,t,"Column expected: "+t+", actual: "+i)}function b(e,t,n,r){var i="http://vimdoc.sourceforge.net/htmldoc/usr_"+t+".html#"+t+"."+n,s;location.protocol==="file:"?s="test "+e+" (See "+i+")":s='test <a href="'+i+'" target="_blank">'+e+"</a>",p[s]=r}var i=e("./../edit_session").EditSession,s=e("./../editor").Editor,o=e("./../undomanager").UndoManager,u=e("./../test/mockrenderer").MockRenderer,a=e("./../test/assertions"),f=e("./../lib/keys"),l=e("./vim"),c,h={},p={};d(),b("Insert text","02","2",function(){var e="A very intelligent turtle\nFound programming UNIX a hurdle";v(""),m("i",e,"Esc"),g(e),m("Esc","Esc"),g(e)}),b("Moving around","02","3",function(){v(" k \nh l\n j "),m("hjj"),y(2,0),m("jll"),y(2,2),m("lkk"),y(0,2),m("khh"),y(0,0)}),b("Deleting characters","02","4",function(){var e="A very intelligent turtle\nFound programming UNIX a hurdle";v(e),m("xxxxxxx"),g(e.substring(7)),m("iA young ","Esc"),g("A young intelligent turtle\nFound programming UNIX a hurdle"),m("dd"),g("Found programming UNIX a hurdle"),m("ddiA young intelligent\nturtle","Esc","kJ"),g("A young intelligent turtle")}),b("Undo and Redo [PARTIAL]","02","5",function(){var e="A young intelligent turtle";v(e),m("ddu"),g(e),m("0xxxxxxx"),g(e.substring(7));for(var t=6;t>=0;t--)m("u"),g(e.substring(t));m("ctrl-r","ctrl-r"),g(e.substring(2)),e="A very intelligent turtle",m("ddi",e,"Esc"),m("0wxxxxxwwxxxxxx"),g("A intelligent ")}),b("Other editing commands [PARTIAL]","02","6",function(){var e="and that's not saying much for the turtle.";v(e),m("$xa!!!","Esc"),g(e.slice(0,-1)+"!!!");var t="A very intelligent turtle",n="Found programming UNIX a hurdle";m("ddi",t+"\n"+n,"Esc");var r="That liked using Vim";m("ko",r,"Esc"),g([t,r,n].join("\n")),m("O","Esc"),g([t,"",r,n].join("\n")),m("a!!!","Esc"),g([t,"!!!",r,n].join("\n")),m("hhh3x"),g([t,"",r,n].join("\n"))}),b("Getting out [PARTIAL]","02","7",function(){v(""),m("ZZ")}),b("Finding help [PARTIAL]","02","8",function(){v(""),m(":help","Return"),m("F1")}),b("Word movement [PARTIAL]","03","1",function(){var e="This is a line with example text";v(e),m("www3w"),y(0,28),m("b2b"),y(0,10),m("3le"),y(0,18)}),b("Moving to the start or end of a line","03","2",function(){var e="     This is a line with example text",t=e.length;v(e),m("$"),y(0,36),m("0"),y(0,0),m("End"),y(0,36),m("Home"),y(0,0),m("^"),y(0,5),m("$^"),y(0,5),m("ddaA young intelligent turtle\nFound programming UNIX a hurdle","Esc","k0"),y(0,0),m("2$"),y(1,30)}),b("Moving to a character [PARTIAL]","03","3",function(){var e="To err is human.  To really foul up you need a computer.";v(r(e,2)),m("fh"),y(0,10),m("3fl"),y(0,31),m("Fh"),y(0,10),m("Fh"),y(0,10),m("2tn"),y(0,39),m("Th"),y(0,11),m("tn"),y(0,13),m(";"),y(0,39),m(","),y(0,15),m("0f","Esc","w"),y(0,3)}),b("Matching a parenthesis","03","4",function(){var e="if (a == (b * c) / d)\nif [a == [b * c] / d]\nif {a == {b * c} / d}";v(e),m("%"),y(0,20),m("%"),y(0,3),m("0j%"),y(1,20),m("%"),y(1,3),m("0j%"),y(2,20),m("%"),y(2,3)}),b("Moving to a specific line [PARTIAL]","03","5",function(){var e="first line of a file\n"+r("text text text text\n",8)+"last line of a file";v(e),m("7G"),y(6,0),m("gg"),y(0,0),m("G"),y(9,0)}),b("Telling where you are [PARTIAL]","03","6",function(){}),b("Scrolling around [PARTIAL]","03","7",function(){}),b("Simple searches [PARTIAL]","03","8",function(){var e=r("To find the word #include\n",10);v(e)}),b("Simple search patterns [PARTIAL]","03","9",function(){}),b("Using marks [PARTIAL]","03","10",function(){}),b("Operators and motions [PARTIAL]","04","1",function(){v("To err is human. To really foul up you need a computer."),m("5wd4w"),g("To err is human. you need a computer.")}),b("Changing text [PARTIAL]","04","2",function(){v("To err is human")}),b("Repeating a change [PARTIAL]","04","3",function(){}),b("Visual mode [PARTIAL]","04","4",function(){}),b("Moving text [PARTIAL]","04","5",function(){}),b("Copying text [PARTIAL]","04","6",function(){}),b("Using the clipboard [PARTIAL]","04","7",function(){}),b("Text objects [PARTIAL]","04","8",function(){}),b("Replace mode [PARTIAL]","04","9",function(){}),p.name="vim_test.js",n.exports=p}),typeof module!="undefined"&&module===require.main&&require("asyncjs").test.testcase(module.exports).exec();